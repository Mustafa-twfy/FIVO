# نظام ترتيب الطلبات الذكي - Tawseel Plus

## نظرة عامة

تم تطوير نظام ترتيب ذكي للطلبات في تطبيق Tawseel Plus لضمان عرض الطلبات للسائقين بالترتيب الأمثل بناءً على عدة عوامل مهمة.

## المميزات الرئيسية

### 1. نظام الأولوية الذكي
- **الوقت (30%)**: الطلبات الأحدث لها أولوية أعلى
- **المبلغ (25%)**: الطلبات الأعلى سعراً لها أولوية أعلى  
- **المسافة (20%)**: الطلبات الأقرب للسائق لها أولوية أعلى
- **نوع المتجر (15%)**: بعض أنواع المتاجر لها أولوية خاصة
- **الطوارئ (10%)**: الطلبات العاجلة تحصل على أولوية إضافية

### 2. تصنيف الطلبات
- **طلبات عاجلة**: الطلبات المميزة كعاجلة
- **طلبات عالية القيمة**: الطلبات التي تزيد عن 50 دينار
- **طلبات قريبة**: الطلبات ضمن 2 كم من السائق
- **طلبات عادية**: باقي الطلبات

### 3. معلومات إضافية
- عرض المسافة من السائق للمتجر
- عرض نوع المتجر (صيدلية، مطعم، إلخ)
- عرض أولوية الطلب
- عرض حالة الطلب العاجل

## كيفية عمل النظام

### حساب الأولوية
```javascript
// مثال على حساب الأولوية
const priority = OrderPrioritySystem.calculatePriority(order, driverLocation);
```

### ترتيب الطلبات
```javascript
// ترتيب الطلبات حسب الأولوية
const sortedOrders = OrderPrioritySystem.sortOrdersByPriority(orders, driverLocation);
```

### تصنيف الطلبات
```javascript
// تصنيف الطلبات إلى فئات
const categories = OrderPrioritySystem.categorizeOrders(orders);
```

## أولوية أنواع المتاجر

| نوع المتجر | الأولوية | السبب |
|------------|----------|-------|
| صيدليات | 100 | طلبات طبية عاجلة |
| مطاعم | 80 | طلبات طعام سريعة |
| مخابز | 70 | طلبات أساسية |
| محلات | 60 | طلبات عامة |
| خدمات | 50 | طلبات متنوعة |
| أخرى | 30 | طلبات متنوعة |

## الملفات المحدثة

### 1. `utils/orderPriority.js`
- نظام حساب الأولوية
- دوال مساعدة للطلبات
- تصنيف وترتيب الطلبات

### 2. `screens/AvailableOrdersScreen.js`
- استخدام نظام الترتيب الجديد
- عرض معلومات إضافية
- ملخص الطلبات المتاحة

### 3. `screens/NewOrderScreen.js`
- إضافة خيار الطلب العاجل
- تحسين واجهة إنشاء الطلب

## المميزات الجديدة في الواجهة

### شاشة الطلبات المتاحة
- **ملخص الطلبات**: عرض إحصائيات سريعة
- **ترتيب ذكي**: الطلبات مرتبة حسب الأولوية
- **معلومات إضافية**: المسافة، نوع المتجر، الأولوية
- **علامات خاصة**: للطلبات العاجلة والعالية القيمة

### شاشة إنشاء الطلب
- **خيار الطلب العاجل**: للمتاجر لتمييز الطلبات المهمة
- **واجهة محسنة**: تصميم أفضل وأوضح

## كيفية الاستخدام

### للمتاجر
1. عند إنشاء طلب جديد، يمكن تحديده كطلب عاجل
2. الطلبات العاجلة ستظهر في أعلى قائمة السائقين
3. سيتم إشعار السائقين بالطلبات العاجلة أولاً

### للسائقين
1. الطلبات تظهر مرتبة حسب الأولوية تلقائياً
2. يمكن رؤية المسافة من المتجر
3. يمكن رؤية نوع المتجر وقيمة الطلب
4. الطلبات العاجلة مميزة بوضوح

## التحسينات المستقبلية

### المخطط للتطوير
- **تخصيص الأولوية**: السماح للسائقين بتخصيص عوامل الأولوية
- **مناطق العمل**: تحديد مناطق عمل محددة للسائقين
- **تاريخ الأداء**: أخذ تاريخ أداء السائق في الاعتبار
- **الطقس**: تأثير الطقس على الأولوية
- **الوقت**: أولوية مختلفة حسب الوقت (ساعات الذروة)

### التحسينات التقنية
- **تحديث فوري**: تحديث الأولوية في الوقت الفعلي
- **إشعارات ذكية**: إشعارات مخصصة حسب الأولوية
- **تحليلات متقدمة**: تقارير مفصلة عن أداء النظام

## استكشاف الأخطاء

### مشاكل شائعة
1. **لا تظهر الطلبات مرتبة**: تأكد من تحديث التطبيق
2. **المسافة غير صحيحة**: تحقق من إعدادات الموقع
3. **الأولوية غير منطقية**: تحقق من بيانات المتجر

### حلول سريعة
- إعادة تشغيل التطبيق
- تحديث قائمة الطلبات
- التحقق من اتصال الإنترنت

## الدعم الفني

لأي استفسارات أو مشاكل:
- تواصل مع الدعم الفني عبر التطبيق
- راجع ملفات التوثيق الأخرى
- تحقق من تحديثات النظام

---

**تم تطوير هذا النظام لتحسين تجربة المستخدم وضمان كفاءة التوصيل** 