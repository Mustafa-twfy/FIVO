# ๐ง ุฅุตูุงุญ ูุธุงู ุงูุฏุนู ุงูููู - ุชูุตูู ุจูุณ

## ๐จ ุงููุดููุฉ ุงูููุชุดูุฉ

ูุธุงู ุงูุฏุนู ุงูููู ูุง ูุนูู ุจุณุจุจ ุชุถุงุฑุจ ูู ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### ุงููุดุงูู:
1. **ุฌุฏูู `support_messages`** ูุญุชูู ุนูู `driver_id` ููุท (ููุณุงุฆููู)
2. **ุฌุฏูู `store_support_messages`** ูููุตู ูููุชุงุฌุฑ
3. **`supportAPI`** ูุญุงูู ุงุณุชุฎุฏุงู `user_type` ู `user_id` ุบูุฑ ููุฌูุฏุฉ
4. **ุนุฏู ุชูุญูุฏ ุงููุธุงู** ุจูู ุงูุณุงุฆููู ูุงููุชุงุฌุฑ

## โ ุงูุญู ุงููุทุจู

### 1. ุชูุญูุฏ ุฌุฏูู ุงูุฏุนู ุงูููู
```sql
CREATE TABLE support_messages (
    id SERIAL PRIMARY KEY,
    user_type VARCHAR(20) NOT NULL, -- 'driver' ุฃู 'store'
    user_id INTEGER NOT NULL,       -- driver_id ุฃู store_id
    message TEXT NOT NULL,
    sender VARCHAR(20) NOT NULL,    -- 'user' ุฃู 'admin'
    is_read BOOLEAN DEFAULT false,
    read_by_admin BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### 2. ุชุญุฏูุซ `supportAPI`
- ุฅุตูุงุญ ุฏูุงู ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู
- ุฅุถุงูุฉ ุฏุงูุฉ `getUnreadSupportCount`
- ุชูุญูุฏ ุงููุธุงู ููุณุงุฆููู ูุงููุชุงุฌุฑ

### 3. ุชุญุฏูุซ `AdminSupportScreen`
- ุฅุตูุงุญ ุนุฑุถ ุงููุญุงุฏุซุงุช
- ุฌูุจ ูุนูููุงุช ุงููุณุชุฎุฏููู ูู ุงูุฌุฏุงูู ุงูุตุญูุญุฉ
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

## ๐๏ธ ุฎุทูุงุช ุงูุฅุตูุงุญ

### ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชุดุบูู ููู ุงูุฅุตูุงุญ ูู Supabase SQL Editor
# ุงูุณุฎ ูุญุชูู fix_support_system.sql ูุงุถุบุท Run
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงููุธุงู
1. **ุชุณุฌูู ุฏุฎูู ูุณุงุฆู**:
   - ุงูุจุฑูุฏ: `driver1@tawseel.com`
   - ูููุฉ ุงููุฑูุฑ: `password123`
   - ุงุฐูุจ ููุฏุนู ุงูููู ูุฃุฑุณู ุฑุณุงูุฉ

2. **ุชุณุฌูู ุฏุฎูู ููุชุฌุฑ**:
   - ุงูุจุฑูุฏ: `store1@tawseel.com`
   - ูููุฉ ุงููุฑูุฑ: `password123`
   - ุงุฐูุจ ููุฏุนู ุงูููู ูุฃุฑุณู ุฑุณุงูุฉ

3. **ุชุณุฌูู ุฏุฎูู ููุฏูุฑ**:
   - ุงูุจุฑูุฏ: `nmcmilli07@gmail.com`
   - ูููุฉ ุงููุฑูุฑ: `admin1234`
   - ุงุฐูุจ ููุฏุนู ุงูููู ูุงุฎุชุจุฑ ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### โ ูุธุงู ููุญุฏ
- ุฌุฏูู ูุงุญุฏ ููุฏุนู ุงูููู
- ุฏุนู ููุงู ูู ุงูุณุงุฆููู ูุงููุชุงุฌุฑ
- ูุธุงู ุฑุณุงุฆู ููุญุฏ

### โ ุฅุฏุงุฑุฉ ูุญุณูุฉ
- ุนุฑุถ ุฌููุน ุงููุญุงุฏุซุงุช
- ูุนูููุงุช ุงููุณุชุฎุฏููู
- ุญุงูุฉ ุงููุฑุงุกุฉ
- ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ

### โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- ูุงุฌูุฉ ููุญุฏุฉ
- ุฑุณุงุฆู ูุงุถุญุฉ
- ุชุญุฏูุซุงุช ููุฑูุฉ

## ๐ ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ ุงูุณุงุฆููู:
```javascript
// ุฅุฑุณุงู ุฑุณุงูุฉ
await supportAPI.sendSupportMessage('driver', driverId, 'ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ', 'user');

// ุฌูุจ ุงูุฑุณุงุฆู
const messages = await supportAPI.getSupportMessages('driver', driverId);
```

### ุงุฎุชุจุงุฑ ุงููุชุงุฌุฑ:
```javascript
// ุฅุฑุณุงู ุฑุณุงูุฉ
await supportAPI.sendSupportMessage('store', storeId, 'ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ', 'user');

// ุฌูุจ ุงูุฑุณุงุฆู
const messages = await supportAPI.getSupportMessages('store', storeId);
```

### ุงุฎุชุจุงุฑ ุงูุฅุฏุงุฑุฉ:
```javascript
// ุฌูุจ ุฌููุน ุงููุญุงุฏุซุงุช
const conversations = await supportAPI.getAllSupportConversations();

// ุฅุฑุณุงู ุฑุฏ
await supportAPI.sendSupportMessage('driver', driverId, 'ุฑุฏ ุงูุฅุฏุงุฑุฉ', 'admin');
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุธูุฑ ุงูุฑุณุงุฆู:
1. ุชุญูู ูู ุชุดุบูู `fix_support_system.sql`
2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
3. ุฑุงุฌุน Console ููุฃุฎุทุงุก

### ุฅุฐุง ูู ูุชู ุงูุฅุฑุณุงู:
1. ุชุญูู ูู ุตุญุฉ `userType` ู `userId`
2. ุชุฃูุฏ ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ

### ุฅุฐุง ูู ุชุธูุฑ ุงููุญุงุฏุซุงุช ูู ุงูุฅุฏุงุฑุฉ:
1. ุชุญูู ูู ูุฌูุฏ ุฑุณุงุฆู ูู ุงูุฌุฏูู
2. ุชุฃูุฏ ูู ุตุญุฉ `user_type` ู `user_id`
3. ุฑุงุฌุน ุฏุงูุฉ `loadConversations`

## ๐ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

ุชู ุฅุฏุฎุงู ุจูุงูุงุช ุชุฌุฑูุจูุฉ ุชุดูู:
- **ุฑุณุงุฆู ูู ุงูุณุงุฆููู**: 4 ุฑุณุงุฆู
- **ุฑุฏูุฏ ุงูุฅุฏุงุฑุฉ**: 3 ุฑุฏูุฏ
- **ุฑุณุงุฆู ูู ุงููุชุงุฌุฑ**: 3 ุฑุณุงุฆู
- **ุฑุฏูุฏ ุฅุถุงููุฉ**: 3 ุฑุฏูุฏ

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ูุธุงู ุฏุนู ููู ููุญุฏ ูุนูู
- โ ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู
- โ ุนุฑุถ ุงููุญุงุฏุซุงุช ูู ุงูุฅุฏุงุฑุฉ
- โ ุฑุฏูุฏ ุงูุฅุฏุงุฑุฉ ุชุนูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน Console ููุฃุฎุทุงุก
2. ุชุญูู ูู ุชุดุบูู ููู SQL
3. ุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
4. ุฑุงุฌุน ููู `DEBUG.md` ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉ

---

**ุชู ุฅุตูุงุญ ูุธุงู ุงูุฏุนู ุงูููู ุจูุฌุงุญ! ๐** 